<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>This Keyword</title>
    <style>
        html {
            background-color: mintcream;
        }
        .block{
            display: inline-block;
            border: 3px solid blue;
            background: ivory;
            margin: 25px;
        }

    </style>
</head>
<body>
    <h1>this Keyword Exercises</h1>
    <h2>Use: <a href="https://highlightjs.org/">https://highlightjs.org/</a></h2>
   
    <p><strong>this</strong> on Global object refers to root object -> window</p>

    <div class="block">
        <p>
            <strong>implicit this</strong> inside an object context refers to the object
        </p>
        <textarea rows=25 cols=65>
            let dog = {
                name: 'Rex Doggo',
                bark: function bark(){
                    console.log('Auau, hi I am dog named ' + this.name);
                    // Auau, hi I am dog named Rex Doggo
                },
                whoIsThis: function whoIsThis(){
                    console.log(this); // dog Object
                },
                friend: {
                    whoIsThis: function whoIsThis(){
                        console.log(this); // friend Object
                        console.log(this.name); // undefined
                    }
                }
            }
        </textarea>
    </div>

    <div class="block">
        <p>
            <strong>explicit this</strong> using <strong>call</strong> and <strong>apply</strong>
        </p>
        <textarea rows=25 cols=65>
            let fabri = {
                name: 'Fabrigol',
                sayHi: function() {
                    return 'Hi ' + this.name;
                },
                sum: function(a,b,c,d) {
                    return this.name + ' likes to rave at ' + (a + b + c + d);
                }
            }
            let jack = {
                name: 'Jack Daniels',
            }
            
            fabri.sayHi();
            //"Hi Fabrigol"
            fabri.sayHi.call(jack);
            //"Hi Jack Daniels"
            
            fabri.sum(1,2,3,4);
            //"Fabrigol likes to rave at 10"
            fabri.sum.call(jack,1,2,3,4);
            //"Jack Daniels likes to rave at 10"
            fabri.sum.apply(jack,[1,2,3,4]);
            //"Jack Daniels likes to rave at 10"     
        </textarea>
    </div>

    <div class="block">
        <p>
            <strong>explicit this</strong> using <strong>bind</strong>
        </p>
        <textarea rows=25 cols=65>
            let math = {
                name: 'Math Object',
                multiply: function(x,y) {
                    return (this.name + ' returns the result ' + x * y);
                }
            }
            let XMath = {
                name: 'Extra Math Object'
            }
            
            math.multiply(3,4)
            // "Math Object returns the result 12"
            let calc = math.multiply.bind(XMath);
            calc(4,5)
            // "Extra Math Object returns the result 20"
            calc(6,4)
            // "Extra Math Object returns the result 24"
        </textarea>
    </div>

    <div class="block">
        <p>
            <strong>explicit this</strong> using <strong>bind</strong> when defining <strong>async</strong> function
        </p>
        <textarea rows=25 cols=65>
            let timer = {
                name: 'Timer function',
                exec: function() {
                    setTimeout(function() {
                        console.log(this.name + ' has been executed right now! on context :' + this);
                    }.bind(this), 1000);
                }
            }
            
            // without .bind(this)
            timer.exec();
            //  has been executed right now! on context :[object Window]
            
            // with .bind(this)
            timer.exec();
            // Timer function has been executed right now! on context :[object Object]
        </textarea>
    </div>


    <script src="this.js"></script>
</body>
</html>